@{var userName = User?.Identity?.IsAuthenticated == true ? User.Identity!.Name : null;
    var isAuthPage = Context.Request.Path.StartsWithSegments("/Admin/Login") || Context.Request.Path.StartsWithSegments("/Admin/Register");
}<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>平台管理后台</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
</head>
<body>
	@if (isAuthPage)
	{
		<!-- 登录和注册页面使用简化布局 -->
		<div class="container-fluid h-100 min-vh-100 d-flex flex-column">
			<main class="flex-grow-1 d-flex justify-content-center align-items-center">
				@RenderBody()
			</main>
		</div>
	}
	else
	{
		<!-- 其他页面使用完整布局 -->
		<div class="layout" id="mainLayout">
			<aside class="sidebar">
				<div class="sidebar-toggle" id="sidebarToggle">
					<i class="bi bi-chevron-left"></i>
				</div>
				<div class="brand">
					<!-- 品牌Logo占位：请放置 2048x2048 缩略图路径 -->
					<img class="brand-logo" src="<!-- /img/brand/logo.png -->" alt="logo" />
					<span>平台管理系统</span>
				</div>
				<nav>
					<!-- 系统概览 -->
					<div class="nav-section">
						<div class="nav-section-title">系统概览</div>
						<a class="nav-link" href="/admin"><i class="bi bi-speedometer2"></i> <span>仪表盘</span></a>
					</div>
					
					<div class="border-t"></div>
					
					<!-- 用户与权限 -->
					<div class="nav-section">
						<div class="nav-section-title">用户与权限</div>
						<a class="nav-link" href="/admin/users"><i class="bi bi-people"></i> <span>用户管理</span></a>
					</div>
					
					<div class="border-t"></div>
					
					<!-- 产品与库存 -->
					<div class="nav-section">
						<div class="nav-section-title">产品与库存</div>
						<a class="nav-link" href="/admin/products"><i class="bi bi-boxes"></i> <span>商品管理</span></a>
						<a class="nav-link" href="/admin/warehouses"><i class="bi bi-building"></i> <span>仓库管理</span></a>
					</div>
					
					<div class="border-t"></div>
					
					<!-- 订单与物流 -->
					<div class="nav-section">
						<div class="nav-section-title">订单与物流</div>
						<a class="nav-link" href="/admin/orders"><i class="bi bi-receipt"></i> <span>订单管理</span></a>
						<a class="nav-link" href="/admin/stations"><i class="bi bi-buildings"></i> <span>站点管理</span></a>
						<a class="nav-link" href="/admin/tracking"><i class="bi bi-clock-history"></i> <span>轨迹管理</span></a>
					</div>
					
					<div class="border-t"></div>
					
					<!-- 客户服务 -->
					<div class="nav-section">
						<div class="nav-section-title">客户服务</div>
						<a class="nav-link" href="/admin/aftersales"><i class="bi bi-arrow-repeat"></i> <span>售后管理</span></a>
					</div>
				</nav>
			</aside>
			<main class="content">
				<header class="topbar">
					<div class="container-fluid py-2 d-flex justify-content-between align-items-center">
						<div class="fw-bold">平台运营中心</div>
						<div class="right">
							@if (userName == null)
							{
								<a class="btn btn-sm btn-outline-primary" href="/admin/login">登录</a>
								<a class="btn btn-sm btn-primary ms-2" href="/admin/register">注册</a>
							}
							else
							{
								<!-- 头像占位：平台管理员头像资源路径 -->
								<img class="avatar" src="<!-- /img/avatar/platform-admin.png -->" alt="avatar" />
								<span class="text-muted">@userName</span>
								<a class="btn btn-sm btn-outline-secondary" href="/admin/logout">退出</a>
							}
						</div>
					</div>
				</header>
				<div class="content-inner">
					@RenderBody()
				</div>
			</main>
		</div>
	}
				<script>
					// 导航栏展开/关闭功能
					document.addEventListener('DOMContentLoaded', function() {
						const sidebar = document.querySelector('.sidebar');
						const layout = document.getElementById('mainLayout');
						const toggleBtn = document.getElementById('sidebarToggle');
						const toggleIcon = toggleBtn.querySelector('i');
						
						// 从localStorage中恢复导航栏状态
						const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
						if (isCollapsed) {
							sidebar.classList.add('collapsed');
							layout.classList.add('sidebar-collapsed');
							toggleIcon.classList.remove('bi-chevron-left');
							toggleIcon.classList.add('bi-chevron-right');
						}
						
						// 绑定切换事件
						toggleBtn.addEventListener('click', function() {
							const isCurrentlyCollapsed = sidebar.classList.contains('collapsed');
							
							if (isCurrentlyCollapsed) {
								// 展开导航栏
								sidebar.classList.remove('collapsed');
								layout.classList.remove('sidebar-collapsed');
								toggleIcon.classList.remove('bi-chevron-right');
								toggleIcon.classList.add('bi-chevron-left');
								localStorage.setItem('sidebarCollapsed', 'false');
							} else {
								// 收起导航栏
								sidebar.classList.add('collapsed');
								layout.classList.add('sidebar-collapsed');
								toggleIcon.classList.remove('bi-chevron-left');
								toggleIcon.classList.add('bi-chevron-right');
								localStorage.setItem('sidebarCollapsed', 'true');
							}
						});
						
						// 高亮当前活动的导航项
						const currentPath = window.location.pathname;
						document.querySelectorAll('.nav-link').forEach(function(link) {
							const linkPath = link.getAttribute('href');
							if (currentPath === linkPath || (linkPath !== '/' && currentPath.startsWith(linkPath + '/'))) {
								link.classList.add('active');
							}
						});
					});
				</script>
		</body>
	</html>
